# –¢–ó: –ú–æ–¥—É–ª—å –†—É—á–Ω–æ–π –ü—Ä–æ–¥–∞–∂–∏ –¢–æ–≤–∞—Ä–æ–≤ (–û—Ç–¥–µ–ª—å–Ω–∞—è –°—Ç—Ä–∞–Ω–∏—Ü–∞)

## üìã –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è —Ä—É—á–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø—Ä–æ—Ü–µ—Å—Å–∞: –æ—Ç –≤—ã–±–æ—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ –æ—Ç–≥—Ä—É–∑–∫–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –∏ —Ä–µ–∑–µ—Ä–≤–∞–º–∏.

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. –ü–µ—Ä–µ—Ö–æ–¥ —Å –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –†—É—á–Ω–∞—è –ø—Ä–æ–¥–∞–∂–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ (popup)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (—Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä, –∫–ª–∏–µ–Ω—Ç, —Å—É–º–º–∞, –≤–∞–ª—é—Ç–∞)

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- **–ù–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç:** `/sales/create`
- **–û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** —Å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥–∞–∂—É" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/sales` –¥–æ–ª–∂–Ω–∞ –≤–µ—Å—Ç–∏ –Ω–∞ `/sales/create`

---

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∂–∏

### –°–µ–∫—Ü–∏—è 1: –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

#### 1.1 –ù–æ–º–µ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (sale_number)
- **–†–µ–∂–∏–º:** –ê–≤—Ç–æ / –†—É—á–Ω–æ–π –≤–≤–æ–¥ (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å)
- **–§–æ—Ä–º–∞—Ç –∞–≤—Ç–æ:**
  - –ü—Ä–µ—Ñ–∏–∫—Å: `MAN-` (Manual)
  - –î–∞—Ç–∞: `YYMMDD` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 251227)
  - –í—Ä–µ–º—è: `HHMMSS` –≤ Unix (–Ω–∞–ø—Ä–∏–º–µ—Ä, 153045)
  - **–ü—Ä–∏–º–µ—Ä:** `MAN-251227-153045`
- **–†—É—á–Ω–æ–π –≤–≤–æ–¥:** –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- **–ü–æ–ª–µ:** `sales.sale_number`

#### 1.2 –î–∞—Ç–∞ –ø—Ä–æ–≤–æ–¥–∫–∏ (sale_date)
- **–¢–∏–ø:** Date picker (–∫–∞–ª–µ–Ω–¥–∞—Ä—å)
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞
- **–§–æ—Ä–º–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:** `DD.MM.YYYY HH:MM`
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** timestamp –≤ `sales.created_at`
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º

#### 1.3 –ü—Ä–æ–¥–∞–≤–µ—Ü (–ö–æ–º–ø–∞–Ω–∏—è-–ø—Ä–æ–¥–∞–≤–µ—Ü)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –ö–æ–º–ø–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`auth()->user()->company_id`)
- **–†–µ–∂–∏–º:**
  - **–ê–≤—Ç–æ:** –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –∫–æ–º–ø–∞–Ω–∏—è ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞–Ω–∞
  - **–†—É—á–Ω–æ–π –≤—ã–±–æ—Ä:** Dropdown –∏–∑ –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ)
  - **–†—É—á–Ω–æ–π –≤–≤–æ–¥:** –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ "–Ω–∞ –ª–µ—Ç—É" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–ü–æ–ª–µ:** `sales.company_id`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, –ò–ù–ù

#### 1.4 –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å)
- **–¢–∏–ø:** Searchable dropdown (–ø–æ–∏—Å–∫ + –≤—ã–±–æ—Ä)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:**
  - –¢–∞–±–ª–∏—Ü–∞ `counterparties`
  - –§–∏–ª—å—Ç—Ä: `is_customer = true AND is_active = true`
- **–§—É–Ω–∫—Ü–∏–∏:**
  - **–ü–æ–∏—Å–∫:** –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –ò–ù–ù, —Ç–µ–ª–µ—Ñ–æ–Ω—É, email
  - **–ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:** –ö–Ω–æ–ø–∫–∞ "+ –ù–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç"
    - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç inline —Ñ–æ—Ä–º—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
    - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –ù–∞–∑–≤–∞–Ω–∏–µ, –¢–∏–ø (—é—Ä/—Ñ–∏–∑ –ª–∏—Ü–æ)
    - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ: –ò–ù–ù, –¢–µ–ª–µ—Ñ–æ–Ω, Email
    - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ä–∞–∑—É –≤ –ë–î —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º ID
- **–ü–æ–ª–µ:** `sales.counterparty_id`
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–º–æ–∂–Ω–æ –ø—Ä–æ–¥–∞–∂–∞ –±–µ–∑ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞)

#### 1.5 –°–∫–ª–∞–¥ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è
- **–¢–∏–ø:** Dropdown
- **–ò—Å—Ç–æ—á–Ω–∏–∫:**
  - –¢–∞–±–ª–∏—Ü–∞ `warehouses`
  - –§–∏–ª—å—Ç—Ä: –°–∫–ª–∞–¥—ã, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —Ç–µ–∫—É—â–µ–π –∫–æ–º–ø–∞–Ω–∏–∏
  - **–°–≤—è–∑—å:** `warehouses.company_id = sales.company_id`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
  - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞
  - –ê–¥—Ä–µ—Å (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –ü—Ä–∏–∑–Ω–∞–∫ "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é"
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –°–∫–ª–∞–¥ —Å —Ñ–ª–∞–≥–æ–º `is_default = true`
- **–ü–æ–ª–µ:** –ù–æ–≤–æ–µ –ø–æ–ª–µ `sales.warehouse_id` (–¥–æ–±–∞–≤–∏—Ç—å –≤ –º–∏–≥—Ä–∞—Ü–∏—é)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

#### 1.6 –í–∞–ª—é—Ç–∞
- **–¢–∏–ø:** Dropdown
- **–í–∞—Ä–∏–∞–Ω—Ç—ã:**
  - UZS (–£–∑–±–µ–∫—Å–∫–∏–π —Å—É–º) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  - USD (–î–æ–ª–ª–∞—Ä –°–®–ê)
  - RUB (–†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å)
  - EUR (–ï–≤—Ä–æ) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
- **–ü–æ–ª–µ:** `sales.currency`
- **–í–ª–∏—è–Ω–∏–µ:** –í—Å–µ —Å—É–º–º—ã –≤ –ø—Ä–æ–≤–æ–¥–∫–µ –≤ —ç—Ç–æ–π –≤–∞–ª—é—Ç–µ

#### 1.7 –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- **–¢–∏–ø:** Textarea (multi-line)
- **Placeholder:** "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥–∞–∂–µ"
- **–ú–∞–∫—Å. –¥–ª–∏–Ω–∞:** 1000 —Å–∏–º–≤–æ–ª–æ–≤
- **–ü–æ–ª–µ:** `sales.notes`
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

### –°–µ–∫—Ü–∏—è 2: –í—ã–±–æ—Ä –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤

#### 2.1 –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–∞
- **–¢–∏–ø:** Autocomplete search field
- **–†–µ–∂–∏–º:** –ñ–∏–≤–æ–π –ø–æ–∏—Å–∫ (–ø–æ–∏—Å–∫ –ø—Ä–∏ –≤–≤–æ–¥–µ, debounce 300ms)
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:**
  - –¢–∞–±–ª–∏—Ü–∞: `product_variants` JOIN `products`
  - –§–∏–ª—å—Ç—Ä—ã:
    - `product_variants.company_id = sales.company_id`
    - `product_variants.is_active = true`
    - `product_variants.is_deleted = false`
    - –¢–æ–≤–∞—Ä—ã, –∏–º–µ—é—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å–∫–ª–∞–¥–µ > 0

**–ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª—è–º:**
- `products.name` (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞)
- `product_variants.sku` (–∞—Ä—Ç–∏–∫—É–ª)
- `product_variants.barcode` (—à—Ç—Ä–∏—Ö–∫–æ–¥)
- `products.article` (–∞—Ä—Ç–∏–∫—É–ª –ø—Ä–æ–¥—É–∫—Ç–∞)
- `product_variants.option_values_summary` (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: —Ä–∞–∑–º–µ—Ä, —Ü–≤–µ—Ç –∏ —Ç.–¥.)

**–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
–ö–∞–∂–¥—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ] –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞                   ‚îÇ
‚îÇ               SKU: ABC-123 | –ë–∞—Ä–∫–æ–¥: 4601234567 ‚îÇ
‚îÇ               –†–∞–∑–º–µ—Ä: L, –¶–≤–µ—Ç: –ö—Ä–∞—Å–Ω—ã–π          ‚îÇ
‚îÇ               –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ: 15 —à—Ç          ‚îÇ ‚Üê –í–ê–ñ–ù–û
‚îÇ               –¶–µ–Ω–∞: 25,000 UZS                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤:**
- –ó–∞–ø—Ä–æ—Å –∫ `product_variants.stock_default` (–∏–ª–∏ –∫ warehouse stock, –µ—Å–ª–∏ –µ—Å—Ç—å)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä—ã —Å –æ—Å—Ç–∞—Ç–∫–æ–º > 0
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:
  - –ó–µ–ª—ë–Ω—ã–π: > 10 —à—Ç
  - –ñ—ë–ª—Ç—ã–π: 1-10 —à—Ç
  - –ö—Ä–∞—Å–Ω—ã–π: < 1 (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å)

#### 2.2 –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É

–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ç–æ–≤–∞—Ä–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü—É —Ç–æ–≤–∞—Ä–æ–≤:

| ‚Ññ | –§–æ—Ç–æ | –¢–æ–≤–∞—Ä | SKU | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ú–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö. | –ö–æ–ª-–≤–æ | –¶–µ–Ω–∞ –∑–∞ –µ–¥. | –°–∫–∏–¥–∫–∞ % | –°—É–º–º–∞ | –î–µ–π—Å—Ç–≤–∏—è |
|---|------|-------|-----|-----------|---------------|--------|-------------|----------|-------|----------|
| 1 | üì∑ | –§—É—Ç–±–æ–ª–∫–∞ XL –ö—Ä–∞—Å–Ω–∞—è | ABC-123 | –û–¥–µ–∂–¥–∞ | –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω | `[2]` | 25,000 | `[0]` | 50,000 | üóëÔ∏è |

**–ü–æ–ª—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞:**

##### 2.2.1 –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** `products.category_id` ‚Üí `product_categories.name`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (read-only)
- **–ü–æ–ª–µ –≤ sale_items:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `metadata->category`

##### 2.2.2 –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞
- **–¢–∏–ø:** Number input (—Å –∫–Ω–æ–ø–∫–∞–º–∏ +/-)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
  - –ú–∏–Ω: 0.001
  - –ú–∞–∫—Å: –¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ
  - Precision: 3 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π (–¥–ª—è –≤–µ—Å–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤)
- **–ü–æ–ª–µ:** `sale_items.quantity`
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç —Å—É–º–º—ã

##### 2.2.3 –°—É–º–º–∞ –ø—Ä–æ–¥–∞–∂–∏ (–∑–∞ –µ–¥–∏–Ω–∏—Ü—É)
- **–¢–∏–ø:** Number input (editable)
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `product_variants.price_default`
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å:** –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é
- **–ü–æ–ª–µ:** `sale_items.unit_price`
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ú–∏–Ω: 0

##### 2.2.4 –°–∫–∏–¥–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–¢–∏–ø:** Number input (%)
- **–î–∏–∞–ø–∞–∑–æ–Ω:** 0-100
- **–ü–æ–ª–µ:** `sale_items.discount_percent`
- **–†–∞—Å—á–µ—Ç:** `subtotal * (discount_percent / 100) = discount_amount`

##### 2.2.5 –ú–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** `products.country_of_origin`
- **–¢–∏–ø:** Dropdown –∏–ª–∏ text input
- **–í–∞—Ä–∏–∞–Ω—Ç—ã:**
  - –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω
  - –ö–∏—Ç–∞–π
  - –¢—É—Ä—Ü–∏—è
  - –†–æ—Å—Å–∏—è
  - –î—Ä—É–≥–æ–µ (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥)
- **–ü–æ–ª–µ:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `metadata->country_of_origin`

##### 2.2.6 –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏
- **–§–æ—Ä–º—É–ª–∞:** `(quantity * unit_price) - discount_amount`
- **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** Read-only, –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü–æ–ª–µ:** `sale_items.total`

---

### –°–µ–∫—Ü–∏—è 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã

#### 3.1 –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥"
–ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∫ –ø—Ä–æ–¥–∞–∂–µ

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—Ö–æ–¥–æ–≤:**
- –î–æ—Å—Ç–∞–≤–∫–∞
- –£–ø–∞–∫–æ–≤–∫–∞
- –°—Ç—Ä–∞—Ö–æ–≤–∫–∞
- –ö–æ–º–∏—Å—Å–∏—è
- –î—Ä—É–≥–æ–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞:**

| –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞ | –°—É–º–º–∞ | –î–µ–π—Å—Ç–≤–∏—è |
|------------------|-------|----------|
| `[–î–æ—Å—Ç–∞–≤–∫–∞ ‚ñº]` | `[5,000]` | üóëÔ∏è |
| `[–£–ø–∞–∫–æ–≤–∫–∞ ‚ñº]` | `[1,500]` | üóëÔ∏è |

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ `sale_items`
- `product_variant_id = NULL`
- `product_name = "–†–∞—Å—Ö–æ–¥: {–Ω–∞–∑–≤–∞–Ω–∏–µ}"`
- `quantity = 1`
- `unit_price = {—Å—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–∞}`
- `metadata->is_expense = true`
- `metadata->expense_type = "delivery" | "packaging" | "other"`

**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –∏—Ç–æ–≥:**
- –†–∞—Å—Ö–æ–¥—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ –æ–±—â–µ–π —Å—É–º–º–µ –ø—Ä–æ–¥–∞–∂–∏
- `sales.total_amount = SUM(sale_items.total) + SUM(expenses.total)`

---

### –°–µ–∫—Ü–∏—è 4: –ò—Ç–æ–≥–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å (–∏–ª–∏ –Ω–∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã):**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ò–¢–û–ì–û                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –¢–æ–≤–∞—Ä–æ–≤:              3 —à—Ç       ‚îÇ
‚îÇ –°—É–º–º–∞ —Ç–æ–≤–∞—Ä–æ–≤:   100,000 UZS     ‚îÇ
‚îÇ –°–∫–∏–¥–∫–∞:           -5,000 UZS     ‚îÇ
‚îÇ –†–∞—Å—Ö–æ–¥—ã:          +6,500 UZS     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ò–¢–û–ì–û –ö –û–ü–õ–ê–¢–ï:  101,500 UZS     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–∞—Å—á–µ—Ç:**
```php
$subtotal = SUM(sale_items WHERE is_expense = false).subtotal
$discounts = SUM(sale_items WHERE is_expense = false).discount_amount
$expenses = SUM(sale_items WHERE is_expense = true).total
$total = $subtotal - $discounts + $expenses
```

---

## üîÑ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–∞–∂–∏

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–∫–∏ (–ß–µ—Ä–Ω–æ–≤–∏–∫)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `sales`:
   - `status = 'draft'`
   - `type = 'manual'`
   - `source = 'manual'`
3. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ `sale_items` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
4. –†–∞—Å—á–µ—Ç –≤—Å–µ—Ö —Å—É–º–º (`subtotal`, `discount_amount`, `total_amount`)
5. **–ù–ï —Ç—Ä–æ–≥–∞–µ–º –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–æ–¥–∞–∂–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞, –Ω–æ —Ç–æ–≤–∞—Ä –µ—â—ë –Ω–∞ —Å–∫–ª–∞–¥–µ
- –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

---

### –≠—Ç–∞–ø 2: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–∫–∏ (–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

#### 2.1 –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –≤ `sale_items`:

1. **–°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤ –≤ `stock_reservations`:**
```sql
INSERT INTO stock_reservations (
    company_id,
    warehouse_id,
    sku_id, -- product_variant_id
    qty,
    status,
    reason,
    source_type,
    source_id,
    expires_at,
    created_by
) VALUES (
    {company_id},
    {warehouse_id},
    {product_variant_id},
    {quantity},
    'ACTIVE',
    '–†–µ–∑–µ—Ä–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏',
    'App\Models\Sale',
    {sale_id},
    NULL, -- –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç –¥–æ –æ—Ç–≥—Ä—É–∑–∫–∏/–æ—Ç–º–µ–Ω—ã
    {user_id}
)
```

2. **–í—Ä–µ–º–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏:**
```php
$variant = ProductVariant::find($item->product_variant_id);
$variant->stock_default -= $item->quantity;
$variant->save();
```

3. **–ó–∞–ø–∏—Å–∞—Ç—å –≤ `sale_items`:**
```php
$item->stock_deducted = true;
$item->stock_deducted_at = now();
$item->metadata = [
    'reservation_id' => $reservation->id,
    'reserved_qty' => $item->quantity,
];
$item->save();
```

4. **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–¥–∞–∂–∏:**
```php
$sale->status = 'confirmed';
$sale->confirmed_at = now();
$sale->confirmed_by = auth()->id();
$sale->save();
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–æ–≤–∞—Ä –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–ø–∏—Å–∞–Ω —Å–æ —Å–∫–ª–∞–¥–∞
- –û—Å—Ç–∞—Ç–∫–∏ —É–º–µ–Ω—å—à–µ–Ω—ã, –Ω–æ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ
- **–û—Å—Ç–∞—Ç–∫–∏ –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏** (–ø–æ–∫–∞ —Ä–µ–∑–µ—Ä–≤)

---

### –≠—Ç–∞–ø 3: –û—Ç–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞ (–§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–û—Ç–≥—Ä—É–∑–∏—Ç—å" (—Ä—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º —Ç–æ–≤–∞—Ä–æ–º –ò–õ–ò –æ–±—â–∞—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ")

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
1. **–û—Ç–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã —Å—Ä–∞–∑—É:** –ö–Ω–æ–ø–∫–∞ "–û—Ç–≥—Ä—É–∑–∏—Ç—å –∑–∞–∫–∞–∑"
2. **–û—Ç–≥—Ä—É–∑–∏—Ç—å –ø–æ –ø–æ–∑–∏—Ü–∏—è–º:** –ß–µ–∫–±–æ–∫—Å—ã —É –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ + –∫–Ω–æ–ø–∫–∞ "–û—Ç–≥—Ä—É–∑–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –æ—Ç–≥—Ä—É–∑–∫–µ:**

#### 3.1 –ü–µ—Ä–µ–≤–æ–¥ —Ä–µ–∑–µ—Ä–≤–∞ –≤ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
```php
foreach ($saleItems as $item) {
    $reservation = StockReservation::find($item->metadata['reservation_id']);

    // –ú–µ–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å —Ä–µ–∑–µ—Ä–≤–∞
    $reservation->status = 'CONSUMED'; // –ü–æ—Ç—Ä–µ–±–ª—ë–Ω
    $reservation->save();

    // –û—Ç–º–µ—Ç–∫–∞ –≤ sale_item
    $item->metadata['shipped'] = true;
    $item->metadata['shipped_at'] = now();
    $item->save();
}
```

#### 3.2 –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
–û—Å—Ç–∞—Ç–∫–∏ —É–∂–µ —É–º–µ–Ω—å—à–µ–Ω—ã –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏, –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º.

#### 3.3 –°–æ–∑–¥–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –≤ stock_ledger
```sql
INSERT INTO stock_ledger (
    company_id,
    occurred_at,
    warehouse_id,
    sku_id,
    qty_delta, -- –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–û–ï –∑–Ω–∞—á–µ–Ω–∏–µ
    source_type,
    source_id
) VALUES (
    {company_id},
    NOW(),
    {warehouse_id},
    {product_variant_id},
    -{quantity}, -- –°–ø–∏—Å–∞–Ω–∏–µ
    'App\Models\Sale',
    {sale_id}
)
```

#### 3.4 –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏
**–¢–û–õ–¨–ö–û –ü–û–°–õ–ï –û–¢–ì–†–£–ó–ö–ò!**

```php
foreach ($saleItems as $item) {
    if ($item->product_variant_id) {
        $variant = $item->productVariant;

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ –≤—Å–µ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã
        $stockSyncService->syncVariantStock($variant);
    }
}
```

–≠—Ç–æ –æ–±–Ω–æ–≤–∏—Ç –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞:
- Uzum Market
- Wildberries
- OZON
- Yandex Market

#### 3.5 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–¥–∞–∂–∏
```php
$sale->status = 'completed';
$sale->completed_at = now();
$sale->save();
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–æ–≤–∞—Ä –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —Å–ø–∏—Å–∞–Ω —Å–æ —Å–∫–ª–∞–¥–∞
- –†–µ–∑–µ—Ä–≤ –∑–∞–∫—Ä—ã—Ç (CONSUMED)
- –î–≤–∏–∂–µ–Ω–∏–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –≤ stock_ledger
- **–û—Å—Ç–∞—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏**
- –ü—Ä–æ–¥–∞–∂–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

---

### –≠—Ç–∞–ø 4: –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ (–í–æ–∑–≤—Ä–∞—Ç)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑"

**–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**
- –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ (draft)
- –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—É—é –ø—Ä–æ–¥–∞–∂—É (confirmed)
- –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ –æ—Ç–≥—Ä—É–∂–µ–Ω–Ω—É—é –ø—Ä–æ–¥–∞–∂—É
- **–ù–ï–õ–¨–ó–Ø –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—É—é (completed)** - –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤–æ–∑–≤—Ä–∞—Ç–∞

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

#### 4.1 –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑–µ—Ä–≤–æ–≤
```php
foreach ($saleItems as $item) {
    if (isset($item->metadata['reservation_id'])) {
        $reservation = StockReservation::find($item->metadata['reservation_id']);

        // –û—Ç–º–µ–Ω—è–µ–º —Ä–µ–∑–µ—Ä–≤
        $reservation->status = 'CANCELLED';
        $reservation->save();
    }
}
```

#### 4.2 –í–æ–∑–≤—Ä–∞—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥
```php
foreach ($saleItems as $item) {
    if ($item->stock_deducted && $item->product_variant_id) {
        $variant = $item->productVariant;

        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
        $variant->stock_default += $item->quantity;
        $variant->save();

        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å
        $item->stock_deducted = false;
        $item->stock_deducted_at = null;
        $item->save();

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –æ—Å—Ç–∞—Ç–∫–∏ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏
        $stockSyncService->syncVariantStock($variant);
    }
}
```

#### 4.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
```php
$sale->status = 'cancelled';
$sale->cancelled_at = now();
$sale->save();
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ —Ä–µ–∑–µ—Ä–≤—ã –æ—Ç–º–µ–Ω–µ–Ω—ã
- –¢–æ–≤–∞—Ä –≤–µ—Ä–Ω—É–ª—Å—è –Ω–∞ —Å–∫–ª–∞–¥
- –û—Å—Ç–∞—Ç–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö
- –ü—Ä–æ–¥–∞–∂–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞

---

## üóÑÔ∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î

### –ú–∏–≥—Ä–∞—Ü–∏—è 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤ `sales`

```php
Schema::table('sales', function (Blueprint $table) {
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–∫–ª–∞–¥
    $table->foreignId('warehouse_id')
        ->after('counterparty_id')
        ->nullable()
        ->constrained('warehouses')
        ->onDelete('set null');

    // –ò–Ω–¥–µ–∫—Å—ã
    $table->index('warehouse_id');
});
```

### –ú–∏–≥—Ä–∞—Ü–∏—è 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `sale_items` metadata

–ü–æ–ª—è —É–∂–µ –µ—Å—Ç—å, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º `metadata` JSON –¥–ª—è:
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞
- `country_of_origin` - –º–µ—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è
- `is_expense` - –ø—Ä–∏–∑–Ω–∞–∫ —Ä–∞—Å—Ö–æ–¥–∞ (true/false)
- `expense_type` - —Ç–∏–ø —Ä–∞—Å—Ö–æ–¥–∞ (delivery, packaging, other)
- `reservation_id` - ID —Ä–µ–∑–µ—Ä–≤–∞ –≤ stock_reservations
- `reserved_qty` - –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `shipped` - –æ—Ç–≥—Ä—É–∂–µ–Ω–æ –ª–∏ (true/false)
- `shipped_at` - –¥–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏

---

## üé® UI/UX –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞
**–í–∏–∑—É–∞–ª—å–Ω—ã–µ –±–µ–π–¥–∂–∏:**
- üü¶ –ß–µ—Ä–Ω–æ–≤–∏–∫ (draft)
- üü° –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ (confirmed) - —Ç–æ–≤–∞—Ä –≤ —Ä–µ–∑–µ—Ä–≤–µ
- üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ (completed) - —Ç–æ–≤–∞—Ä –æ—Ç–≥—Ä—É–∂–µ–Ω
- üî¥ –û—Ç–º–µ–Ω–µ–Ω–∞ (cancelled)

### 2. –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
**–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π –ø—Ä–æ–¥–∞–∂–∏:**
```
27.12.2024 15:30 - –°–æ–∑–¥–∞–Ω–∞ –ø—Ä–æ–¥–∞–∂–∞ (–ò–≤–∞–Ω–æ–≤ –ò.–ò.)
27.12.2024 15:35 - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞, —Ç–æ–≤–∞—Ä –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω (–ò–≤–∞–Ω–æ–≤ –ò.–ò.)
27.12.2024 16:00 - –û—Ç–≥—Ä—É–∂–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è #1: –§—É—Ç–±–æ–ª–∫–∞ XL - 2 —à—Ç (–ò–≤–∞–Ω–æ–≤ –ò.–ò.)
27.12.2024 16:05 - –û—Å—Ç–∞—Ç–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏
```

–•—Ä–∞–Ω–µ–Ω–∏–µ: –≤ `metadata` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `sale_history`

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
**–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤–æ–≤
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ—Å—Ç–∞—Ç–æ–∫ < —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

**–†–∞—Å—á–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞:**
```php
$availableStock = $variant->stock_default - $activeReservations->sum('qty');
```

### 4. –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
**–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:**
- `Ctrl+S` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
- `Ctrl+Enter` - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É
- `F2` - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä (—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–∏—Å–∫)
- `F3` - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥

### 5. –ü–µ—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
**–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–¥–∞–∂–∏:**
- –ö–Ω–æ–ø–∫–∞ "–†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—É—é"
- –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å PDF"
- –®–∞–±–ª–æ–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å:
  - –†–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞
  - –†–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
  - –°–ø–∏—Å–∫–æ–º —Ç–æ–≤–∞—Ä–æ–≤
  - –°—É–º–º–∞–º–∏
  - –ü–æ–¥–ø–∏—Å—è–º–∏

---

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

1. **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º:**
   - –°–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏
   - –ù–ï –º–æ–∂–µ—Ç –æ—Ç–≥—Ä—É–∂–∞—Ç—å

2. **–ö–ª–∞–¥–æ–≤—â–∏–∫:**
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏
   - –û—Ç–≥—Ä—É–∂–∞—Ç—å —Ç–æ–≤–∞—Ä
   - –ù–ï –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å/–æ—Ç–º–µ–Ω—è—Ç—å

3. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
   - –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
   - –ú–æ–∂–µ—Ç –æ—Ç–º–µ–Ω—è—Ç—å –ª—é–±—ã–µ –ø—Ä–æ–¥–∞–∂–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:
```php
// –í –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ
if (!auth()->user()->can('create_sales')) {
    abort(403);
}
```

---

## üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–û—Ç—á—ë—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º:**
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–æ–¥–∞–≤—Ü–∞–º
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞–º
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Ç–æ–≤–∞—Ä–æ–≤

2. **–û—Ç—á—ë—Ç –ø–æ —Ä–µ–∑–µ—Ä–≤–∞–º:**
   - –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤—ã
   - –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤—ã
   - –°—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –æ—Ç —Ä–µ–∑–µ—Ä–≤–∞ –¥–æ –æ—Ç–≥—Ä—É–∑–∫–∏

3. **–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞:**
   - –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Ç–æ–≤–∞—Ä –±—ã–ª –ø—Ä–æ–¥–∞–Ω
   - –°—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–¥–∞–∂–∏
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥–∞–∂—É —Å 2 —Ç–æ–≤–∞—Ä–∞–º–∏
2. –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥ (–¥–æ—Å—Ç–∞–≤–∫–∞)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑–µ—Ä–≤ –∏ –æ—Å—Ç–∞—Ç–∫–∏
4. –û—Ç–≥—Ä—É–∑–∏—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å stock_ledger

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ß–∞—Å—Ç–∏—á–Ω–∞—è –æ—Ç–≥—Ä—É–∑–∫–∞
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥–∞–∂—É —Å 3 —Ç–æ–≤–∞—Ä–∞–º–∏
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å
3. –û—Ç–≥—Ä—É–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ 2 —Ç–æ–≤–∞—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–º–µ–Ω–∞ –ø–æ—Å–ª–µ —Ä–µ–∑–µ—Ä–≤–∞
1. –°–æ–∑–¥–∞—Ç—å –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–º–µ–Ω—å—à–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤
3. –û—Ç–º–µ–Ω–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞
1. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º > –æ—Å—Ç–∞—Ç–æ–∫
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Å—Å–æ–π (POS)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–Ω—Ç–µ—Ä–æ–≤
- –ü–µ—á–∞—Ç—å —á–µ–∫–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞–ª–æ–≥–æ–≤–æ–π (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### 2. –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–¥–∞–∂
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π —Ç–æ–≤–∞—Ä–æ–≤
- –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞
- –ù–∞–ø—Ä–∏–º–µ—Ä: "–ö–æ–º–ø–ª–µ–∫—Ç —à–∫–æ–ª—å–Ω–∏–∫–∞", "–°—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä"

### 3. –†–∞–±–æ—Ç–∞ —Å–æ —Å–∫–∞–Ω–µ—Ä–æ–º —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ USB/Bluetooth —Å–∫–∞–Ω–µ—Ä–æ–≤
- –ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ –±–∞—Ä–∫–æ–¥—É
- –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞

### 4. –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–ª–∞–Ω—à–µ—Ç–æ–≤
- –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –ø—Ä–æ–¥–∞–∂
- Offline-—Ä–µ–∂–∏–º —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π

### 5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Email/SMS –ø–æ–∫—É–ø–∞—Ç–µ–ª—é –ø–æ—Å–ª–µ –æ—Ç–≥—Ä—É–∑–∫–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä—É –æ –Ω–æ–≤–æ–π –ø—Ä–æ–¥–∞–∂–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–º –æ—Å—Ç–∞—Ç–∫–µ —Ç–æ–≤–∞—Ä–∞

### 6. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
- –°–∫–∏–¥–∫–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

### 7. –í–æ–∑–≤—Ä–∞—Ç—ã (Returns)
- –û—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏
- –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏)
- –í–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥ / –æ–±–º–µ–Ω –Ω–∞ –¥—Ä—É–≥–æ–π —Ç–æ–≤–∞—Ä
- –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `sale_returns`

### 8. –°–µ—Ä–∏–π–Ω—ã–µ –Ω–æ–º–µ—Ä–∞
- –î–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏ (—ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞, —Ç–µ—Ö–Ω–∏–∫–∞)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- –ì–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–π —É—á—ë—Ç

---

## ‚úÖ Checklist —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Backend (Laravel)

- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è: –¥–æ–±–∞–≤–∏—Ç—å `warehouse_id` –≤ `sales`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å `Sale` (—Å–≤—è–∑—å —Å warehouse)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å `SaleItem` (–º–µ—Ç–æ–¥—ã –¥–ª—è expenses)
- [ ] –°–æ–∑–¥–∞—Ç—å `SaleReservationService` (—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ—Ç–≥—Ä—É–∑–∫–∞/–æ—Ç–º–µ–Ω–∞)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `SaleService` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∑–µ—Ä–≤–∞–º–∏)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –≤ `SalesManagementController`:
  - `reserve()` - —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  - `ship()` - –æ—Ç–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞
  - `shipAll()` - –æ—Ç–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
  - `getWarehouses()` - —Å–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤
  - `getAvailableStock()` - –¥–æ—Å—Ç—É–ø–Ω—ã–π –æ—Å—Ç–∞—Ç–æ–∫ —Ç–æ–≤–∞—Ä–∞
- [ ] –°–æ–∑–¥–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–µ—Ä–µ–¥ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `StockSyncService` (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –æ—Ç–≥—Ä—É–∑–∫–∏)
- [ ] API endpoints –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ (expenses)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –≤ `sale_history` –∏–ª–∏ `metadata`

### Frontend (Blade + Alpine.js / Vue.js)

- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/sales/create` (–Ω–æ–≤—ã–π view)
- [ ] –§–æ—Ä–º–∞: –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Å–µ–∫—Ü–∏—è 1)
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: Date picker –¥–ª—è –¥–∞—Ç—ã –ø—Ä–æ–≤–æ–¥–∫–∏
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: Autocomplete –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: –¢–∞–±–ª–∏—Ü–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ (expenses)
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: –ò—Ç–æ–≥–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —Å—É–º–º–∞–º–∏
- [ ] –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
- [ ] JavaScript: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] JavaScript: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç —Å—É–º–º
- [ ] –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π:
  - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫
  - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–æ–¥–∞–∂—É
  - –û—Ç–≥—Ä—É–∑–∏—Ç—å
  - –û—Ç–º–µ–Ω–∏—Ç—å
- [ ] –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ (–±–µ–π–¥–∂–∏)
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞ (–º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### Routes

- [ ] `GET /sales/create` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥–∞–∂–∏
- [ ] `POST /api/sales-management/{id}/reserve` - —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] `POST /api/sales-management/{id}/ship` - –æ—Ç–≥—Ä—É–∑–∫–∞
- [ ] `POST /api/sales-management/{id}/ship-all` - –æ—Ç–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö
- [ ] `GET /api/sales-management/warehouses` - —Å–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤
- [ ] `GET /api/sales-management/products/stock` - –æ—Å—Ç–∞—Ç–∫–∏ —Ç–æ–≤–∞—Ä–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] Unit —Ç–µ—Å—Ç—ã: `SaleReservationService`
- [ ] Unit —Ç–µ—Å—Ç—ã: `SaleService` (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã)
- [ ] Feature —Ç–µ—Å—Ç—ã: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–¥–∞–∂–∏
- [ ] Feature —Ç–µ—Å—Ç—ã: –û—Ç–º–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º
- [ ] Feature —Ç–µ—Å—Ç—ã: –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤
- [ ] Integration —Ç–µ—Å—Ç—ã: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏

---

## üìÖ –û—Ü–µ–Ω–∫–∞ —Å—Ä–æ–∫–æ–≤

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (MVP):**
- Backend API: 2-3 –¥–Ω—è
- Frontend (–±–∞–∑–æ–≤—ã–π): 2-3 –¥–Ω—è
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 1-2 –¥–Ω—è
- **–ò—Ç–æ–≥–æ: 5-8 –¥–Ω–µ–π**

**–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (—Å–æ –≤—Å–µ–º–∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏):**
- Backend: 4-5 –¥–Ω–µ–π
- Frontend: 4-5 –¥–Ω–µ–π
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏: 2-3 –¥–Ω—è
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 2-3 –¥–Ω—è
- **–ò—Ç–æ–≥–æ: 12-16 –¥–Ω–µ–π**

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Must have):
1. ‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–º–µ—Å—Ç–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
2. ‚úÖ –í—Å–µ –ø–æ–ª—è –∏–∑ —Å–µ–∫—Ü–∏–∏ 1 (–æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
3. ‚úÖ –ü–æ–∏—Å–∫ –∏ –≤—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏
4. ‚úÖ –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏
5. ‚úÖ –û—Ç–≥—Ä—É–∑–∫–∞ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã
6. ‚úÖ –û—Ç–º–µ–Ω–∞ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –æ—Å—Ç–∞—Ç–∫–æ–≤

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Should have):
7. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ (expenses)
8. –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
9. –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π
10. –ü–µ—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Nice to have):
11. –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–¥–∞–∂
12. –°–∫–∞–Ω–µ—Ä —à—Ç—Ä–∏—Ö–∫–æ–¥–æ–≤
13. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
14. –°–µ—Ä–∏–π–Ω—ã–µ –Ω–æ–º–µ—Ä–∞

---

## üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–æ–µ –¢–ó –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —Ä—É—á–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏ —Å:
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø—Ä–æ—Ü–µ—Å—Å–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–≤–∞—Ä–∞
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ—Ç–≥—Ä—É–∑–∫–∏
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π —Å–∫–ª–∞–¥–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤

–ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏! üöÄ
